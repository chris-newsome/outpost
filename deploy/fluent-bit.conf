[SERVICE]
    Flush        1
    Daemon       Off
    Log_Level    info

# Systemd journal
[INPUT]
    Name         systemd
    Tag          systemd.*
    Systemd_Filter  _SYSTEMD_UNIT=outpost-api-docker.service
    Systemd_Filter  _SYSTEMD_UNIT=outpost-web-docker.service
    DB           /var/log/flb_systemd.db

# Docker container logs
[INPUT]
    Name         tail
    Tag          docker.*
    Path         /var/lib/docker/containers/*/*-json.log
    Parser       docker
    DB           /var/log/flb_docker.db
    Mem_Buf_Limit  10MB
    Skip_Long_Lines On

# CloudWatch Logs output
[OUTPUT]
    Name              cloudwatch_logs
    Match             systemd.*
    region            ${AWS_REGION}
    log_group_name    /outpost/systemd
    log_stream_prefix host-
    auto_create_group true

[OUTPUT]
    Name              cloudwatch_logs
    Match             docker.*
    region            ${AWS_REGION}
    log_group_name    /outpost/docker
    log_stream_prefix host-
    auto_create_group true
